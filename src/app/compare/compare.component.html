<div class="row justify-content-between sticky-menu">
  <span class="col-auto">
    <span class="p-buttonset">
      <button pButton pRipple type="button" class="p-button-sm p-button-outlined p-button-secondary" (click)="noActionSelection()" title="Do not copy or delete files in Dataverse" [attr.disabled]="disabled ? '' : null">
        <i [class]="icon_noaction"></i>&nbsp;No action
      </button>
      <button pButton pRipple type="button" class="p-button-sm p-button-outlined p-button-secondary" (click)="updateSelection()" title="Copy all new and changed files to Dataverse" [attr.disabled]="disabled ? '' : null">
        <i [class]="icon_update"></i>&nbsp;Update
      </button>
      <button pButton pRipple type="button" class="p-button-sm p-button-outlined p-button-secondary" (click)="mirrorSelection()" title="Copy all new and changed files to Dataverse and delete in Dataverse the files that do not exist in the repository" [attr.disabled]="disabled ? '' : null">
        <i [class]="icon_mirror"></i>&nbsp;Mirror
      </button>
    </span>
  </span>

  <span class="col-auto">
    <button pButton pRipple type="button" class="p-button-sm p-button-outlined p-button-secondary" (click)="refresh()" title="Refresh files status" [hidden]="refreshHidden">
      <i class="pi pi-refresh"></i>&nbsp;Refresh
    </button>
    <span class="p-buttonset">
      <button pButton pRipple type="button" [style]="'background-color: ' + background_new" class="p-button-sm p-button-outlined p-button-secondary" (click)="filterNew()" title="Files that aren't in the dataset yet" [attr.disabled]="disabled ? '' : null">
        <i class="pi pi-plus-circle" style="color: green"></i>
      </button>
      <button pButton pRipple type="button" [style]="'background-color: ' + background_not_equal" class="p-button-sm p-button-outlined p-button-secondary" (click)="filterUpdated()" title="Files that are not the same in the dataset and the active data repository, but share the same file name and/or file path" [attr.disabled]="disabled ? '' : null">
        <i class="pi pi-exclamation-circle" style="color: blue"></i>
      </button>
      <button pButton pRipple type="button" [style]="'background-color: ' + background_equal" class="p-button-sm p-button-outlined p-button-secondary" (click)="filterEqual()" title="Files that are the same in the dataset and the active data repository" [attr.disabled]="disabled ? '' : null">
        <i class="pi pi-check-circle" style="color: black"></i>
      </button>
      <button pButton pRipple type="button" [style]="'background-color: ' + background_deleted" class="p-button-sm p-button-outlined p-button-secondary" (click)="filterDeleted()" title="Files that are only in the dataset, but not in the active data repository" [attr.disabled]="disabled ? '' : null">
        <i class="pi pi-minus-circle" style="color: red"></i>
      </button>
      <button pButton pRipple type="button" [style]="'background-color: ' + background_all" class="p-button-sm p-button-outlined p-button-secondary" (click)="filterNone()" title="Show all files" [attr.disabled]="disabled ? '' : null">
        <i class="pi pi-filter-slash" style="color: darkgrey"></i>
      </button>
    </span>
  </span>
</div>

<br/>

<div height="100% - 2em">
  <p-treeTable [value]="rootNodeChildren" [loading]="loading">
    <ng-template pTemplate="header">
      <tr>
        <th class="repository_col">{{ repo() }}</th>
        <!--th class="size_col">Size</th-->
        <th class="compare_col">
          <span title="Comparison status">
            <svg width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
              <path fill="#000000" fill-rule="evenodd" d="M14,14 C14.5523,14 15,14.4477 15,15 C15,15.5523 14.5523,16 14,16 L10,16 C9.44772,16 9,15.5523 9,15 C9,14.4477 9.44772,14 10,14 L14,14 Z M9.17157,1 C9.70201,1 10.2107,1.21071 10.5858,1.58579 L13.4142,4.41421 C13.7893,4.78929 14,5.29799 14,5.82843 L14,6 L10,6 C9.44771,6 9,5.55228 9,5 L9,3 L4,3 L4,13 L6,13 C6.55228,13 7,13.4477 7,14 C7,14.5523 6.55228,15 6,15 L3,15 C2.44772,15 2,14.5523 2,14 L2,2 C2,1.44772 2.44772,1 3,1 L9.17157,1 Z M12,7 C12.5523,7 13,7.44772 13,8 L13,9 L14,9 C14.5523,9 15,9.44771 15,10 C15,10.5523 14.5523,11 14,11 L13,11 L13,12 C13,12.5523 12.5523,13 12,13 C11.4477,13 11,12.5523 11,12 L11,11 L10,11 C9.44772,11 9,10.5523 9,10 C9,9.44771 9.44772,9 10,9 L11,9 L11,8 C11,7.44772 11.4477,7 12,7 Z"/>
            </svg>
          </span>
        </th>
        <th class="action_col">
          <i [class]="icon_action"></i>
        </th>
        <th width="dataverse_col">Dataverse (<a href="https://rdr.kuleuven.be/dataset.xhtml?persistentId={{ data?.id }}">{{ data?.id }}</a>)</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowNode let-rowData="rowData">
      <tr app-datafile [hidden]="rowData.hidden" [datafile]="rowData" [loading]="loading" [rowNodeMap]="rowNodeMap" [rowNode]="rowNode" [isInFilter]="isInFilterMode" [style]="rowClass(rowData)">
    </ng-template>
  </p-treeTable>
</div>

<br/>

<div>
  <button pButton pRipple type="button" class="p-button-sm p-button-outlined p-button-secondary" (click)="back()"><i class="pi pi-angle-double-left"></i>&nbsp;Return</button>
  <button style="float: right;" pButton pRipple type="button" class="p-button-sm p-button-outlined p-button-secondary" (click)="submit()" title="Initiate selected changes" [attr.disabled]="disabled ? '' : null">Submit&nbsp;<i class="pi pi-angle-double-right"></i></button>
</div>